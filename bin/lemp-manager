#!/usr/bin/env bash

# Variable definitions
. {ENV_LOCATION}

usage() {
    shift
    echo "lemp-manager deploy <vm1.yml> [<vm2.yml> ...]"
    echo "lemp-manager update"
    echo "lemp-manager remove <name1> [<name2> ...]"
    echo "lemp-manager start <name1> [<name2> ...]"
    echo "lemp-manager stop <name1> [<name2> ...]"
    echo "lemp-manager list"
    echo "lemp-manager help"
    echo "\$ lemp-manager update-hosts"
}

# Check if they are at least 1 param
if [[ $# -eq 0 ]]; then # Error, no args provided
    usage
    exit 1
fi

# Filter the first arg
PARAM=$1
shift
case "$PARAM" in
    deploy)
        lemp-manager-deploy "$@";;
    update)
        lemp-manager-update "$@";;
    remove)
        lemp-manager-delete "$@";;
    update-hosts)
        lemp-manager-hosts-update "$@";;
    start)
        lemp-manager-start "$@" ;;
    stop)
        lemp-manager-stop "$@";;
    list)
        lemp-manager-list "$@";;
    help)
        usage;;
    *)
        echo "ERROR: unknown parameter \"$PARAM\""
        usage
        exit 1
        ;;
esac
